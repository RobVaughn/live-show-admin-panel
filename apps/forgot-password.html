<?php
  require_once('actions/hcaptcha.php');
  $data = getSecret();
?>
        <div class="app-content-header">
          <div class="container-fluid">
            <div class="row justify-content-center">
              <div class="col-12">
                <h2>REQUEST NEW PASSWORD</h2>
              </div>
            </div>
          </div>
        </div>

        <!-- Add email to admins when pw changed -->
        <div class="app-content password-reset">
          <div class="container-fluid">
            <div class="row">
              <div class="col-12">
                <div class="card mx-auto">
                  <div class="card-body mx-auto bg-grey-light">
                    <div class="card-title justify-content-center">
                      <div id="captcha" class="h-captcha" data-sitekey="9402980c-368a-410e-b3ac-4c207518d194" data-bind="recaptcha-submit" data-callback="enablePasswordField" data-theme="dark"></div>
                      <input class="hiddenRecaptcha required" id="hiddenRecaptcha" type="hidden" name="hiddenRecaptcha">
                    </div>
                    <div class="col-12 d-flex bg-grey-dark">
                      <p class="mx-auto">Please verify you're human before continuing</p>
                    </div>

                    <div class="h-captcha-msg col-12 d-flex bg-white">
                      <p class="mx-auto">Email will be sent to the address associated with the account entered below (if it exists) and login will be disabled until confirmed in that message.</p>
                    </div>

                    <!-- Password Form -->
                    <div class="color-white justify-content-center">
                      <form id="reset-password" action="actions/send-reset-email.php" method="post">
                        <div class="form-group row justify-content-center">
                          <div class="col-4 mt-4 text-end">
                            <label for="username">Account:</label>
                          </div>
                          <div class="col-7 mt-4 text-start">
                            <input id="username" type="text" name="username" autocomplete="username" placeholder="Account" aria-describedby="accountHelp" value="admin" \><br>
                            <small id="accountHelp" class="form-text help-text text-muted">Account to change password for</small>
                          </div>
                        </div>

                        <div class="form-group row justify-content-center">
                          <div class="col-4 mt-2 text-end">
                            <label for="inputPassword1">New Password:</label>
                          </div>
                          <div class="col-7 mt-2 text-start">
                            <input id="inputPassword1" class="pw-field disabled-input" type="password" name="password1" autocomplete="current-password" placeholder="Complete Captcha Above" disabled="disabled" required \>
                          </div>
                        </div>
                        <div class="form-group row justify-content-center">
                          <div class="col-4 text-end">
                            <label for="inputPassword2">Confirm Password:</label>
                          </div>
                          <div class="col-7 text-start">
                            <input id="inputPassword2" class="pw-field disabled-input" type="password" name="password2" autocomplete="current-password" placeholder="Complete Captcha Above" disabled="disabled" required \>
                          </div>
                        </div>
                        <div class="form-group row d-inline-flex justify-content-center">
                          <div class="col-12 mt-3 mb-3 align-self-center">
                            <button id="login-button" class="password-button red-button" type="submit" disabled="disabled">Submit Password</button>
                          </div>
                        </div>
                      </form>
                    </div>

                    <!-- Password requirements and strength -->
                    <div class="row">
                      <div class="col-10 mx-auto bg-white">
                        <div class="card-title justify-content-center">
                          <p>Passwords must match and consist of 8 characters or more containing at least one capital letter, number and symbol each.</p>
                        </div>
                        <div class="col-10 mx-auto bg-grey-light">
                          <p>Password Strength &amp; Match</p>
                        </div>
                        <div class="col-10 mx-auto bg-grey-light">
                          <div class="strength-container">
                            <div id="strength-bar"></div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="row confirm-msg">
                      <div class="email-msg col-12 d-flex bg-grey-dark">
                        <p>Email has been sent. Please click in the enclosed link to confirm the new password. It will expire in <?php echo isset($RESET_TIME) ? $GLOBALS_RESET_TIME : "20"; ?> minutes.</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
